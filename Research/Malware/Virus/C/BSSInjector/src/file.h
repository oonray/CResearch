/*
 * @author Alexander Bj√∏rnsrud
 * @filename file.h
 * @brief Holds the file struct and dunctions
 */

#ifndef __file_h
#define __file_h

struct fbuf {
		int fsize;
		uint8_t *fdata;
} fbuf;

int read_file(char * fname){
		FILE *f = fopen(fname,"rb");
		return 0;
}

uint8_t *extend_file(void *data, int dsize){
		uint8_t *file2;

		if(fbuf.fsize == 0){ 
				file2 = malloc(1); 
				check(file2,"Could not Allocate!");
				memcpy(file2,data,dsize);
		}else{ 
				file2 = malloc(fbuf.fsize + 1);
				check(file2,"Could not Allocate!");

				uint8_t *loc = file2;
				loc += sizeof(fbuf.fdata);
				memcpy(file2,fbuf.fdata,fbuf.fsize);
				memcpy(loc,data,dsize);
		}
		fbuf.fsize++;
		fbuf.fdata=file2; 
		error:
				return NULL;
}

#endif
